{"version":3,"sources":["../src/index.ts","../src/AptosConnectWallet.ts","../src/AptosConnectAccount.ts","../src/shared.ts","../src/AptosConnectWalletPlugin.ts","../src/conversion.ts"],"sourcesContent":["// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { registerWallet } from '@aptos-labs/wallet-standard';\nimport { AptosConnectWallet, AptosConnectWalletConfig } from './AptosConnectWallet';\n\nexport * from './AptosConnectAccount';\nexport * from './AptosConnectWallet';\nexport * from './AptosConnectWalletPlugin';\n\nexport function registerAptosConnect(config: AptosConnectWalletConfig = {}) {\n  const walletPlugin = new AptosConnectWallet(config);\n  registerWallet(walletPlugin);\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { AccountInfo as ACAccountInfo } from '@aptos-connect/wallet-api';\nimport {\n  AccountAddress,\n  AnyRawTransaction,\n  Aptos,\n  AptosConfig,\n  Network,\n  NetworkToNodeAPI,\n  PendingTransactionResponse,\n} from '@aptos-labs/ts-sdk';\nimport {\n  AccountInfo,\n  APTOS_CHAINS,\n  AptosConnectNamespace,\n  AptosDisconnectNamespace,\n  AptosFeatures,\n  AptosGetAccountNamespace,\n  AptosGetNetworkNamespace,\n  AptosOnAccountChangeNamespace,\n  AptosOnNetworkChangeNamespace,\n  AptosSignAndSubmitTransactionFeature,\n  AptosSignAndSubmitTransactionInput,\n  AptosSignAndSubmitTransactionNamespace,\n  AptosSignAndSubmitTransactionOutput,\n  AptosSignMessageInput,\n  AptosSignMessageNamespace,\n  AptosSignMessageOutput,\n  AptosSignTransactionNamespace,\n  AptosSignTransactionOutput,\n  AptosWallet,\n  AptosWalletError,\n  AptosWalletErrorCode,\n  NetworkInfo,\n  UserResponse,\n  UserResponseStatus,\n} from '@aptos-labs/wallet-standard';\nimport { deserializePublicKeyB64, serializePublicKeyB64 } from '@identity-connect/crypto';\nimport { ACDappClient, ACDappClientConfig } from '@identity-connect/dapp-sdk';\nimport { AptosConnectAccount } from './AptosConnectAccount';\nimport { walletIcon, walletName, walletUrl } from './shared';\n\ninterface SerializedCurrentAccount {\n  address: string;\n  publicKey: string;\n}\n\nfunction customAccountToStandardAccount({ address, name, publicKey }: ACAccountInfo) {\n  return new AccountInfo({\n    address,\n    ansName: name,\n    publicKey,\n  });\n}\n\nexport interface AptosConnectWalletConfig extends Omit<ACDappClientConfig, 'defaultNetworkName'> {\n  network?: Network;\n}\n\nexport class AptosConnectWallet implements AptosWallet {\n  // region connectedAccount\n\n  private static connectedAccountStorageKey = '@aptos-connect/connectedAccount';\n\n  private static get connectedAccount(): AccountInfo | undefined {\n    const serialized = localStorage.getItem(AptosConnectWallet.connectedAccountStorageKey);\n    if (!serialized) {\n      return undefined;\n    }\n\n    const { address, publicKey } = JSON.parse(serialized) as SerializedCurrentAccount;\n    return serialized\n      ? new AccountInfo({\n          address: AccountAddress.from(address),\n          publicKey: deserializePublicKeyB64(publicKey),\n        })\n      : undefined;\n  }\n\n  private static set connectedAccount(value: AccountInfo | undefined) {\n    if (value !== undefined) {\n      const serialized: SerializedCurrentAccount = {\n        address: value.address.toString(),\n        publicKey: serializePublicKeyB64(value.publicKey),\n      };\n      localStorage.setItem(AptosConnectWallet.connectedAccountStorageKey, JSON.stringify(serialized));\n    } else {\n      localStorage.removeItem(AptosConnectWallet.connectedAccountStorageKey);\n    }\n  }\n\n  // endregion\n\n  // region AptosWallet\n\n  readonly name = walletName;\n  readonly version = '1.0.0';\n\n  readonly icon = walletIcon;\n  readonly url = walletUrl;\n\n  readonly chains = APTOS_CHAINS;\n\n  // eslint-disable-next-line class-methods-use-this\n  get accounts() {\n    const { connectedAccount } = AptosConnectWallet;\n    return connectedAccount ? [new AptosConnectAccount(connectedAccount)] : [];\n  }\n\n  get features(): AptosFeatures & AptosSignAndSubmitTransactionFeature {\n    return {\n      [AptosConnectNamespace]: {\n        connect: this.connect.bind(this),\n        version: '1.0.0',\n      },\n      [AptosDisconnectNamespace]: {\n        disconnect: this.disconnect.bind(this),\n        version: '1.0.0',\n      },\n      [AptosGetAccountNamespace]: {\n        account: this.getAccount.bind(this),\n        version: '1.0.0',\n      },\n      [AptosGetNetworkNamespace]: {\n        network: this.getNetwork.bind(this),\n        version: '1.0.0',\n      },\n      [AptosOnAccountChangeNamespace]: {\n        onAccountChange: this.onAccountChange.bind(this),\n        version: '1.0.0',\n      },\n      [AptosOnNetworkChangeNamespace]: {\n        onNetworkChange: this.onNetworkChange.bind(this),\n        version: '1.0.0',\n      },\n      [AptosSignAndSubmitTransactionNamespace]: {\n        signAndSubmitTransaction: this.signAndSubmitTransaction.bind(this),\n        version: '1.1.0',\n      },\n      [AptosSignMessageNamespace]: {\n        signMessage: this.signMessage.bind(this),\n        version: '1.0.0',\n      },\n      [AptosSignTransactionNamespace]: {\n        signTransaction: this.signTransaction.bind(this),\n        version: '1.0.0',\n      },\n    };\n  }\n\n  // endregion\n\n  // PetraWallet\n\n  private readonly aptosClient: Aptos;\n\n  private readonly client: ACDappClient;\n\n  constructor({ network = Network.MAINNET, ...clientConfig }: AptosConnectWalletConfig) {\n    this.client = new ACDappClient(clientConfig);\n\n    if (!NetworkToNodeAPI[network]) {\n      throw new Error('Network not supported');\n    }\n\n    const aptosConfig = new AptosConfig({ network });\n    this.aptosClient = new Aptos(aptosConfig);\n  }\n\n  async connect(): Promise<UserResponse<AccountInfo>> {\n    // If this is an auto-connect, try not opening the prompt\n    const { connectedAccount } = AptosConnectWallet;\n    if (connectedAccount !== undefined) {\n      return { args: connectedAccount, status: UserResponseStatus.APPROVED };\n    }\n\n    const response = await this.client.connect();\n    if (response.status === 'dismissed') {\n      return { status: UserResponseStatus.REJECTED };\n    }\n\n    const newConnectedAccount = customAccountToStandardAccount(response.args.account);\n    AptosConnectWallet.connectedAccount = newConnectedAccount;\n\n    return {\n      args: newConnectedAccount,\n      status: UserResponseStatus.APPROVED,\n    };\n  }\n\n  async disconnect() {\n    const { connectedAccount } = AptosConnectWallet;\n    if (connectedAccount) {\n      await this.client.disconnect(connectedAccount.address);\n      AptosConnectWallet.connectedAccount = undefined;\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getAccount(): Promise<AccountInfo> {\n    const { connectedAccount } = AptosConnectWallet;\n    if (!connectedAccount) {\n      // TODO: this function should fail gracefully\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n    return customAccountToStandardAccount(connectedAccount);\n  }\n\n  async getNetwork(): Promise<NetworkInfo> {\n    const { network } = this.aptosClient.config;\n    const chainId = await this.aptosClient.getChainId();\n    const url = NetworkToNodeAPI[network];\n    return {\n      chainId,\n      name: network,\n      url,\n    };\n  }\n\n  async signMessage(input: AptosSignMessageInput): Promise<UserResponse<AptosSignMessageOutput>> {\n    const { connectedAccount } = AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n\n    const { chainId } = await this.getNetwork();\n    const { message, nonce } = input;\n\n    const encoder = new TextEncoder();\n    const messageBytes = encoder.encode(message);\n    const nonceBytes = encoder.encode(nonce);\n\n    const response = await this.client.signMessage({\n      chainId,\n      message: messageBytes,\n      nonce: nonceBytes,\n      signerAddress: connectedAccount.address,\n    });\n\n    if (response.status === 'dismissed') {\n      return { status: UserResponseStatus.REJECTED };\n    }\n\n    const { fullMessage, signature } = response.args;\n\n    const extraResponseArgs = {\n      address: connectedAccount.address.toString(),\n      application: '',\n      chainId,\n      message,\n      nonce,\n      prefix: 'APTOS' as const,\n    };\n\n    return {\n      args: {\n        fullMessage,\n        signature,\n        ...extraResponseArgs,\n      },\n      status: UserResponseStatus.APPROVED,\n    };\n  }\n\n  async signTransaction(\n    transaction: AnyRawTransaction,\n    _asFeePayer?: boolean,\n  ): Promise<UserResponse<AptosSignTransactionOutput>> {\n    const { connectedAccount } = AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n\n    const feePayer = transaction.feePayerAddress ? { address: transaction.feePayerAddress } : undefined;\n    const secondarySigners = transaction.secondarySignerAddresses?.map((address) => ({ address }));\n    const response = await this.client.signTransaction({\n      feePayer,\n      secondarySigners,\n      signerAddress: connectedAccount.address,\n      transaction: transaction.rawTransaction,\n    });\n\n    if (response.status === 'dismissed') {\n      return { status: UserResponseStatus.REJECTED };\n    }\n\n    return {\n      args: response.args.authenticator,\n      status: UserResponseStatus.APPROVED,\n    };\n  }\n\n  async signAndSubmitTransaction(\n    args: AptosSignAndSubmitTransactionInput,\n  ): Promise<UserResponse<AptosSignAndSubmitTransactionOutput>> {\n    const { gasUnitPrice, maxGasAmount, payload } = args;\n\n    const { connectedAccount } = AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n\n    const response = await this.client.signAndSubmitTransaction({\n      gasUnitPrice,\n      maxGasAmount,\n      network: this.aptosClient.config.network,\n      payload,\n      signerAddress: connectedAccount.address,\n    });\n\n    if (response.status === 'dismissed') {\n      return { status: UserResponseStatus.REJECTED };\n    }\n\n    // We should change the return type to only the hash. No point in returning the whole transaction object\n    const txnResponse = (await this.aptosClient.getTransactionByHash({\n      transactionHash: response.args.txnHash,\n    })) as PendingTransactionResponse;\n\n    return {\n      args: txnResponse,\n      status: UserResponseStatus.APPROVED,\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async onAccountChange(_callback?: (newAccount: AccountInfo) => void): Promise<void> {\n    // TODO\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async onNetworkChange(_callback?: (newNetwork: NetworkInfo) => void): Promise<void> {\n    // Not applicable\n  }\n\n  // endregion\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AccountAddress,\n  AnyPublicKey,\n  Ed25519PublicKey,\n  MultiEd25519PublicKey,\n  MultiKey,\n  PublicKey,\n  SigningScheme,\n} from '@aptos-labs/ts-sdk';\nimport { AccountInfo, APTOS_CHAINS, AptosWalletAccount } from '@aptos-labs/wallet-standard';\n\nexport class AptosConnectAccount implements AptosWalletAccount {\n  // region AptosWalletAccount\n\n  readonly chains = APTOS_CHAINS;\n\n  get address() {\n    return this.#address.toString();\n  }\n\n  get publicKey() {\n    return this.#publicKey.toUint8Array();\n  }\n\n  get signingScheme() {\n    if (this.#publicKey instanceof Ed25519PublicKey) {\n      return SigningScheme.Ed25519;\n    }\n    if (this.#publicKey instanceof MultiEd25519PublicKey) {\n      return SigningScheme.MultiEd25519;\n    }\n    if (this.#publicKey instanceof AnyPublicKey) {\n      return SigningScheme.SingleKey;\n    }\n    if (this.#publicKey instanceof MultiKey) {\n      return SigningScheme.MultiKey;\n    }\n    throw new Error('Unsupported public key type');\n  }\n\n  readonly label?: string;\n\n  readonly features = [];\n\n  // endregion\n\n  // region PetraAccount\n\n  readonly #address: AccountAddress;\n\n  readonly #publicKey: PublicKey;\n\n  constructor({ address, ansName, publicKey }: AccountInfo) {\n    this.#publicKey = publicKey;\n    this.#address = address;\n    this.label = ansName;\n  }\n\n  // endregion\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nexport const walletName = 'Continue with Google';\nexport const walletUrl = 'https://aptosconnect.app';\nexport const walletIcon =\n  // eslint-disable-next-line max-len\n  'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iaF8yMCB3XzIwIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIzLjU0IDEyLjc2MTNDMjMuNTQgMTEuOTQ1OSAyMy40NjY4IDExLjE2MTggMjMuMzMwOSAxMC40MDkxSDEyLjVWMTQuODU3NUgxOC42ODkxQzE4LjQyMjUgMTYuMjk1IDE3LjYxMjMgMTcuNTEyOSAxNi4zOTQzIDE4LjMyODRWMjEuMjEzOEgyMC4xMTA5QzIyLjI4NTUgMTkuMjExOCAyMy41NCAxNi4yNjM2IDIzLjU0IDEyLjc2MTNaIiBmaWxsPSIjNDI4NUY0Ij48L3BhdGg+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi40OTk1IDIzLjk5OThDMTUuNjA0NSAyMy45OTk4IDE4LjIwNzcgMjIuOTcgMjAuMTEwNCAyMS4yMTM3TDE2LjM5MzggMTguMzI4MkMxNS4zNjQgMTkuMDE4MiAxNC4wNDY3IDE5LjQyNTkgMTIuNDk5NSAxOS40MjU5QzkuNTA0MjUgMTkuNDI1OSA2Ljk2OTAyIDE3LjQwMyA2LjA2NDcgMTQuNjg0OEgyLjIyMjY2VjE3LjY2NDRDNC4xMTQ5MyAyMS40MjI4IDguMDA0MDIgMjMuOTk5OCAxMi40OTk1IDIzLjk5OThaIiBmaWxsPSIjMzRBODUzIj48L3BhdGg+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjA2NTIzIDE0LjY4NTFDNS44MzUyMyAxMy45OTUxIDUuNzA0NTUgMTMuMjU4MSA1LjcwNDU1IDEyLjUwMDFDNS43MDQ1NSAxMS43NDIyIDUuODM1MjMgMTEuMDA1MSA2LjA2NTIzIDEwLjMxNTFWNy4zMzU1N0gyLjIyMzE4QzEuNDQ0MzIgOC44ODgwNyAxIDEwLjY0NDQgMSAxMi41MDAxQzEgMTQuMzU1OCAxLjQ0NDMyIDE2LjExMjIgMi4yMjMxOCAxNy42NjQ3TDYuMDY1MjMgMTQuNjg1MVoiIGZpbGw9IiNGQkJDMDUiPjwvcGF0aD48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjQ5OTUgNS41NzM4NkMxNC4xODc5IDUuNTczODYgMTUuNzAzOCA2LjE1NDA5IDE2Ljg5NTYgNy4yOTM2NEwyMC4xOTQgMy45OTUyM0MxOC4yMDI0IDIuMTM5NTUgMTUuNTk5MiAxIDEyLjQ5OTUgMUM4LjAwNDAyIDEgNC4xMTQ5MyAzLjU3NzA1IDIuMjIyNjYgNy4zMzU0NUw2LjA2NDcgMTAuMzE1QzYuOTY5MDIgNy41OTY4MiA5LjUwNDI1IDUuNTczODYgMTIuNDk5NSA1LjU3Mzg2WiIgZmlsbD0iI0VBNDMzNSI+PC9wYXRoPjwvc3ZnPg==';\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { AccountInfo as ACAccountInfo, SignAndSubmitTransactionRequest, UserResponse } from '@aptos-connect/wallet-api';\nimport {\n  AccountAddress,\n  AccountAuthenticator,\n  AccountAuthenticatorEd25519,\n  AccountAuthenticatorSingleKey,\n  Aptos,\n  AptosConfig,\n  Ed25519PublicKey,\n  Ed25519Signature,\n  InputGenerateTransactionPayloadData,\n  MultiEd25519PublicKey,\n  MultiKey,\n  Network,\n  NetworkToNodeAPI,\n  SignedTransaction,\n  TransactionAuthenticatorEd25519,\n  TransactionAuthenticatorSingleSender,\n  TransactionPayload,\n} from '@aptos-labs/ts-sdk';\nimport {\n  AccountInfo,\n  AdapterPlugin,\n  AnyRawTransaction,\n  InputTransactionData,\n  NetworkInfo,\n  SignMessagePayload,\n  SignMessageResponse,\n  WalletName,\n} from '@aptos-labs/wallet-adapter-core';\nimport { AptosWalletError, AptosWalletErrorCode } from '@aptos-labs/wallet-standard';\nimport { ACDappClient, ACDappClientConfig } from '@identity-connect/dapp-sdk';\nimport { TxnBuilderTypes, Types } from 'aptos';\nimport { convertPayloadInputFromV1ToV2, convertV1toV2 } from './conversion';\nimport { walletIcon, walletName, walletUrl } from './shared';\n\nfunction customAccountToStandardAccount({ address, name, publicKey }: ACAccountInfo): AccountInfo {\n  if (publicKey instanceof MultiEd25519PublicKey || publicKey instanceof MultiKey) {\n    throw new Error('Unsupported public key type');\n  }\n\n  return {\n    address: address.toString(),\n    ansName: name,\n    publicKey: publicKey.toString(),\n  };\n}\n\nfunction accountAuthenticatorToTransactionAuthenticator(accountAuthenticator: AccountAuthenticator) {\n  if (accountAuthenticator instanceof AccountAuthenticatorEd25519) {\n    return new TransactionAuthenticatorEd25519(accountAuthenticator.public_key, accountAuthenticator.signature);\n  }\n  if (accountAuthenticator instanceof AccountAuthenticatorSingleKey) {\n    if (accountAuthenticator.isEd25519()) {\n      return new TransactionAuthenticatorEd25519(\n        accountAuthenticator.public_key.publicKey as Ed25519PublicKey,\n        accountAuthenticator.signature.signature as Ed25519Signature,\n      );\n    }\n    return new TransactionAuthenticatorSingleSender(accountAuthenticator);\n  }\n  throw new Error('Cannot convert account authenticator to a compatible transaction authenticator');\n}\n\nfunction unwrapUserResponse<TArgs>(response: UserResponse<TArgs>) {\n  if (response.status === 'dismissed') {\n    throw new AptosWalletError(0, 'Rejected');\n  }\n  return response.args;\n}\n\n// Redefining interface, to include some arguments that production dapps are using\nexport interface TransactionOptions {\n  expirationSecondsFromNow?: number;\n  expirationTimestamp?: number;\n  gasUnitPrice?: number;\n  gas_unit_price?: number;\n  maxGasAmount?: number;\n  max_gas_amount?: number;\n  sender?: string;\n  sequenceNumber?: number;\n}\n\nexport interface AptosConnectWalletPluginConfig extends Omit<ACDappClientConfig, 'defaultNetworkName'> {\n  network?: Network;\n}\n\nexport class AptosConnectWalletPlugin implements AdapterPlugin {\n  // Hack to make this always available\n  readonly providerName = 'open';\n  readonly provider: typeof window.open | undefined;\n  readonly version = 'v2';\n\n  readonly name = walletName as WalletName;\n  readonly url = walletUrl;\n  readonly icon = walletIcon;\n\n  readonly client: ACDappClient;\n  readonly aptosClient: Aptos;\n\n  constructor({ network = Network.MAINNET, ...clientConfig }: AptosConnectWalletPluginConfig) {\n    this.client = new ACDappClient(clientConfig);\n\n    if (!NetworkToNodeAPI[network]) {\n      throw new Error('Network not supported');\n    }\n\n    const aptosConfig = new AptosConfig({ network });\n    this.aptosClient = new Aptos(aptosConfig);\n  }\n\n  // region connectedAccount\n  private static connectedAccountStorageKey = 'AptosConnectWalletPlugin.connectedAccount';\n\n  private static get connectedAccount(): AccountInfo | undefined {\n    const value = localStorage.getItem(AptosConnectWalletPlugin.connectedAccountStorageKey);\n    return value ? JSON.parse(value) : undefined;\n  }\n\n  private static set connectedAccount(value: AccountInfo | undefined) {\n    if (value !== undefined) {\n      localStorage.setItem(AptosConnectWalletPlugin.connectedAccountStorageKey, JSON.stringify(value));\n    } else {\n      localStorage.removeItem(AptosConnectWalletPlugin.connectedAccountStorageKey);\n    }\n  }\n\n  // endregion\n\n  async connect(): Promise<AccountInfo> {\n    // If this is an auto-connect, try not opening the prompt\n    const { connectedAccount } = AptosConnectWalletPlugin;\n    if (connectedAccount !== undefined) {\n      return connectedAccount;\n    }\n\n    const response = await this.client.connect();\n    if (response.status === 'dismissed') {\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n\n    const newConnectedAccount = customAccountToStandardAccount(response.args.account);\n    AptosConnectWalletPlugin.connectedAccount = newConnectedAccount;\n    return newConnectedAccount;\n  }\n\n  async account(): Promise<AccountInfo> {\n    const [firstAccount] = await this.client.getConnectedAccounts();\n    if (firstAccount === undefined) {\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n    return customAccountToStandardAccount(firstAccount);\n  }\n\n  async disconnect(): Promise<void> {\n    const { connectedAccount } = AptosConnectWalletPlugin;\n    if (connectedAccount) {\n      await this.client.disconnect(connectedAccount.address);\n      AptosConnectWalletPlugin.connectedAccount = undefined;\n    }\n  }\n\n  async signAndSubmitTransaction(\n    payloadV1InputOrGenerateTxnInput: Types.TransactionPayload | InputTransactionData,\n    optionsV1?: TransactionOptions,\n  ): Promise<{ hash: Types.HexEncodedBytes }> {\n    const { connectedAccount } = AptosConnectWalletPlugin;\n    if (!connectedAccount) {\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n\n    let payload: TransactionPayload | InputGenerateTransactionPayloadData;\n    let options: Omit<SignAndSubmitTransactionRequest.Args, 'payload'>;\n\n    if ('data' in payloadV1InputOrGenerateTxnInput) {\n      const { data: payloadV2Input, options: optionsV2 } = payloadV1InputOrGenerateTxnInput;\n      payload = payloadV2Input;\n      options = {\n        expirationTimestamp: optionsV2?.expireTimestamp,\n        gasUnitPrice: optionsV2?.gasUnitPrice,\n        maxGasAmount: optionsV2?.maxGasAmount,\n        network: this.aptosClient.config.network,\n      };\n    } else {\n      payload = convertPayloadInputFromV1ToV2(payloadV1InputOrGenerateTxnInput);\n      options = {\n        expirationTimestamp: optionsV1?.expirationTimestamp,\n        gasUnitPrice: optionsV1?.gasUnitPrice ?? optionsV1?.gas_unit_price,\n        maxGasAmount: optionsV1?.maxGasAmount ?? optionsV1?.max_gas_amount,\n        network: this.aptosClient.config.network,\n      };\n    }\n\n    const response = await this.client.signAndSubmitTransaction({\n      signerAddress: AccountAddress.from(connectedAccount.address),\n      ...options,\n      payload,\n    });\n    const { txnHash } = unwrapUserResponse(response);\n    return { hash: txnHash };\n  }\n\n  async signAndSubmitBCSTransaction(\n    payloadV1: TxnBuilderTypes.TransactionPayload,\n    options?: any,\n  ): Promise<{ hash: Types.HexEncodedBytes }> {\n    const { connectedAccount } = AptosConnectWalletPlugin;\n    if (!connectedAccount) {\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n    const payload = convertV1toV2(payloadV1, TransactionPayload);\n    const response = await this.client.signAndSubmitTransaction({\n      expirationTimestamp: options?.expirationTimestamp,\n      gasUnitPrice: options?.gasUnitPrice ?? options?.gas_unit_price,\n      maxGasAmount: options?.maxGasAmount ?? options?.max_gas_amount,\n      network: this.aptosClient.config.network,\n      payload,\n      signerAddress: AccountAddress.from(connectedAccount.address),\n    });\n    const { txnHash } = unwrapUserResponse(response);\n    return { hash: txnHash };\n  }\n\n  async signMessage(args: SignMessagePayload): Promise<SignMessageResponse> {\n    const { connectedAccount } = AptosConnectWalletPlugin;\n    if (!connectedAccount) {\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n    const chainId = await this.aptosClient.getChainId();\n    const { message, nonce } = args;\n\n    const encoder = new TextEncoder();\n    const messageBytes = encoder.encode(message);\n    const nonceBytes = encoder.encode(nonce);\n\n    const response = await this.client.signMessage({\n      chainId,\n      message: messageBytes,\n      nonce: nonceBytes,\n      signerAddress: AccountAddress.from(connectedAccount.address),\n    });\n\n    const { fullMessage, signature } = unwrapUserResponse(response);\n\n    const extraResponseArgs = {\n      address: connectedAccount.address.toString(),\n      application: this.client.dappInfo.domain,\n      chainId,\n      message,\n      nonce,\n      prefix: 'APTOS' as const,\n    };\n\n    return {\n      fullMessage,\n      signature: signature.toString(),\n      ...extraResponseArgs,\n    };\n  }\n\n  async signTransaction(\n    transactionOrPayload: Types.TransactionPayload | TxnBuilderTypes.TransactionPayload | AnyRawTransaction,\n    optionsOrAsFeePayer?: TransactionOptions | boolean,\n  ): Promise<AccountAuthenticator | Uint8Array> {\n    const { connectedAccount } = AptosConnectWalletPlugin;\n    if (!connectedAccount) {\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n\n    // If \"rawTransaction\" is part of the args, then we have a v2 request\n    if ('rawTransaction' in transactionOrPayload) {\n      const transaction = transactionOrPayload;\n      const feePayer = transaction.feePayerAddress ? { address: transaction.feePayerAddress } : undefined;\n      const secondarySigners = transaction.secondarySignerAddresses?.map((address) => ({ address }));\n      const response = await this.client.signTransaction({\n        feePayer,\n        secondarySigners,\n        signerAddress: AccountAddress.from(connectedAccount.address),\n        transaction: transaction.rawTransaction,\n      });\n      const { authenticator } = unwrapUserResponse(response);\n      return authenticator;\n    }\n\n    if (!(transactionOrPayload instanceof TxnBuilderTypes.TransactionPayload)) {\n      throw new Error('Not supported');\n    }\n\n    const payload = convertV1toV2(transactionOrPayload, TransactionPayload);\n    const options = optionsOrAsFeePayer as TransactionOptions | undefined;\n\n    const sender = options?.sender\n      ? {\n          address: AccountAddress.from(options.sender),\n        }\n      : undefined;\n\n    const response = await this.client.signTransaction({\n      expirationSecondsFromNow: options?.expirationSecondsFromNow,\n      expirationTimestamp: options?.expirationTimestamp,\n      gasUnitPrice: options?.gasUnitPrice ?? options?.gas_unit_price,\n      maxGasAmount: options?.maxGasAmount ?? options?.max_gas_amount,\n      network: this.aptosClient.config.network,\n      payload,\n      sender,\n      sequenceNumber: options?.sequenceNumber,\n      signerAddress: AccountAddress.from(connectedAccount.address),\n    });\n\n    const { authenticator, rawTransaction } = unwrapUserResponse(response);\n\n    if (rawTransaction === undefined) {\n      throw new Error('The wallet did not return a raw transaction');\n    }\n\n    const txnAuthenticator = accountAuthenticatorToTransactionAuthenticator(authenticator);\n    const signedTransaction = new SignedTransaction(rawTransaction, txnAuthenticator);\n    return signedTransaction.bcsToBytes();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async onNetworkChange(_callback?: (args: NetworkInfo) => void): Promise<void> {\n    // Not applicable\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async onAccountChange(_callback?: (args: AccountInfo) => void): Promise<void> {\n    // Not applicable\n  }\n\n  async network(): Promise<NetworkInfo> {\n    const { network } = this.aptosClient.config;\n    const chainId = await this.aptosClient.getChainId();\n    const url = NetworkToNodeAPI[network];\n    return {\n      chainId: chainId.toString(),\n      name: network,\n      url,\n    };\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, InputGenerateTransactionPayloadData, MoveFunctionId } from '@aptos-labs/ts-sdk';\nimport { BCS, Types } from 'aptos';\n\nexport type SerializableV1 = { serialize(serializer: BCS.Serializer): void };\nexport type DeserializableV2Class<T> = { deserialize(deserializer: Deserializer): T };\n\nexport function convertV1toV2<TV1 extends SerializableV1, TV2>(src: TV1, dst: DeserializableV2Class<TV2>) {\n  const serializedBytes = BCS.bcsToBytes(src);\n  const deserializerV2 = new Deserializer(serializedBytes);\n  return dst.deserialize(deserializerV2);\n}\n\nexport function convertPayloadInputFromV1ToV2(inputV1: Types.TransactionPayload): InputGenerateTransactionPayloadData {\n  if ('multisig_address' in inputV1) {\n    throw new Error('Multisig payload not supported');\n  }\n\n  if ('code' in inputV1) {\n    throw new Error('Script payload not supported');\n  }\n\n  if ('function' in inputV1) {\n    return {\n      function: inputV1.function as MoveFunctionId,\n      functionArguments: inputV1.arguments,\n      typeArguments: inputV1.type_arguments,\n    };\n  }\n\n  throw new Error('Unsupported payload type');\n}\n"],"mappings":"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","names":["AccountAddress","AccountInfo","APTOS_CHAINS","AccountInfo","APTOS_CHAINS","AccountAddress","AccountAddress","Aptos","AptosConfig","MultiEd25519PublicKey","MultiKey","Network","NetworkToNodeAPI","AptosWalletError","AptosWalletErrorCode","ACDappClient","customAccountToStandardAccount","MultiEd25519PublicKey","MultiKey","AptosWalletError","Network","ACDappClient","NetworkToNodeAPI","AptosConfig","Aptos","AptosWalletErrorCode","AccountAddress","response","authenticator"]}